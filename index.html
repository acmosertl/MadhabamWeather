<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>আজকের আবহাওয়া</title>
<style>
  body {
    font-family: "Noto Sans Bengali", sans-serif;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    margin: 0;
    background: linear-gradient(to bottom, #0b152b 0%, #1e2940 100%);
    color: #fff;
    transition: background 1s ease;
  }

  .weather-card {
    background: rgba(255, 255, 255, 0.12);
    padding: 20px 16px;
    border-radius: 18px;
    width: 90%;
    max-width: 300px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.45);
    overflow: hidden;
  }

  h1 {
    font-size: 1.3em;
    margin: 5px 0 10px 0;
  }

  .location {
    font-size: 1.05em;
    opacity: 0.9;
    margin-bottom: 5px;
  }

  .temperature {
    font-size: clamp(2.6em, 6vw, 3.5em);
    font-weight: bold;
    margin: 8px 0;
  }

  .weather-icon {
    font-size: 3.2em;
    margin: 6px 0;
    text-shadow: 0 0 14px rgba(255, 215, 100, 0.9);
  }

  .condition-now {
    font-size: 1.25em;
    margin-top: 8px;
    line-height: 1.6em;
    white-space: pre-line;
    color: #fff;
    text-shadow: 0 0 6px rgba(255,255,255,0.6);
  }

  .details {
    font-size: 1.05em;
    margin-top: 6px;
    opacity: 0.95;
  }

  .forecast {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 18px;
  }

  .day {
    background: rgba(255,255,255,0.12);
    border-radius: 10px;
    padding: 8px 5px;
    text-align: center;
    font-size: 1em;
    font-weight: 500;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }

  .day-icon {
    font-size: 2.2em;
    margin-bottom: 3px;
    text-shadow: 0 0 8px rgba(255,215,100,0.7);
  }

  .day-temp {
    font-size: 1em;
    margin-top: 3px;
  }
</style>
</head>
<body>
  <div class="weather-card" id="weather">
    <h1>আজকের আবহাওয়া</h1>
    <div class="location" id="location">অবস্থান নির্ধারণ হচ্ছে...</div>
    <div class="temperature" id="temp">--°C</div>
    <div class="weather-icon" id="icon">☀️</div>
    <div class="condition-now" id="condition">এখন
আকাশ পরিস্কার</div>
    <div class="details" id="details">আর্দ্রতা: --% • বাতাস: -- km/h • বৃষ্টি: -- mm</div>
    <div class="forecast" id="forecast"></div>
  </div>
<script>
  async function loadWeather(lat, lon) {
    const api = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weathercode,relative_humidity_2m,precipitation,wind_speed_10m&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=auto`;
    const res = await fetch(api);
    const data = await res.json();

    // বর্তমান ডাটা
    const temp = data.current.temperature_2m.toFixed(1);
    const humidity = data.current.relative_humidity_2m;
    const wind = data.current.wind_speed_10m.toFixed(1);
    const rain = data.current.precipitation.toFixed(1);
    const weatherCode = data.current.weathercode;

    // UI-তে সেট করো
    document.getElementById("temp").textContent = `${temp}°C`;
    document.getElementById("details").textContent = `আর্দ্রতা: ${humidity}% • বাতাস: ${wind} km/h • বৃষ্টি: ${rain} mm`;
    document.getElementById("condition").textContent = "এখন\n" + getWeatherText(weatherCode);

    // ৭ দিনের ফোরকাস্ট
    const forecastDiv = document.getElementById("forecast");
    forecastDiv.innerHTML = "";
    const days = ["রবি","সোম","মঙ্গল","বুধ","বৃহস্পতি","শুক্র","শনি"];
    const today = new Date().getDay();

    for (let i = 0; i < 7; i++) {
      const dayIndex = (today + i) % 7;
      const dayLabel = i === 0 ? "আজ" : days[dayIndex];
      const max = data.daily.temperature_2m_max[i].toFixed(1);
      const min = data.daily.temperature_2m_min[i].toFixed(1);
      const code = data.daily.weathercode[i];
      const icon = getWeatherIcon(code);

      const card = document.createElement("div");
      card.className = "forecast-card";
      card.innerHTML = `${icon}<div>${dayLabel}</div><div>${max}° / ${min}°</div>`;
      forecastDiv.appendChild(card);
    }
  }
</script>
</body>
</html>
